<% if bean.present? %>

	<div id="bean_plofile" >
		<% if bean.bean_image? %>
		<%= image_tag bean.bean_image.to_s, :size => '750x750' %>
		<% else %>
		<%= image_tag 'C0FEE.png', :size => '750x750' %>
		<% end %></br>
	</div>

		<div id="chartContainer">
			<canvas id="beanChart"></canvas>
		</div>

		<table>
			<tbody>
				<tr>
					<th><i class= "medium material-icons tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:country) %> >public</i></th>
					<td><%= bean.country %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:area) %> >place</i></th>
					<td><%= bean.area %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:farm) %> >home</i></th>
					<td><%= bean.farm %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:variety) %> >local_florist</i></th>
					<td><%= bean.variety %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:process) %> >loop</i></th>
					<td><%= bean.process_i18n %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:roast) %> >invert_colors</i></th>
					<td><%= bean.roast_i18n %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:roast_date) %> >date_range</i></th>
					<td><%= bean.roast_date %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:shop) %> >store</i></th>
					<td><%= link_to bean.shop.name, shop_path(id: bean.shop.id) %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:price) %> >attach_money</i></th>
					<td><%= bean.price %><% if bean.price.present? %><%= t('.currency_unit') %>/100g<%end%></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= Impression.human_attribute_name(:i_comment) %> >message</i></th>
					<td><%= bean.impression.i_comment %></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= User.model_name.human %> >person</i></th>
					<td><%= link_to bean.user.username, user_path(id: bean.user.id)%></td>
				</tr>
				<tr>
					<th><i class="medium material-icons prefix tooltipped" data-position="right" data-tooltip=<%= Bean.human_attribute_name(:updated_at) %> >access_time</i></th>
					<td><%= l bean.updated_at %></td>
				</tr>
			</tbody>
		</table>
		<table>
			<tbody>
						<tr>
							<td><div id="bean_like_button_<%= bean.id %>" style="text-align: center" class= "like_bean_button"><%= render 'bean_likes/like_bean_button',bean: bean %></div></td>
						</tr>
						<tr>
							<td><%= render 'recipes/make_recipe_button', bean: bean %></td>
						</tr>
						<% if current_user == bean.user %>
							<tr>
								<td><%= render 'edit_bean_link', bean: bean %></td>
							</tr>
							<tr>
								<td><%= render 'delete_bean_link', bean: bean %></td>
							</tr>
						<% end %>
			</tbody>
		</table>
<% end %>
<script>
  I18n.defaultLocale = "<%= I18n.default_locale %>";
  I18n.locale = "<%= I18n.locale %>";
  I18n.fallbacks = true;
</script>
<script>
$(window).on('load', function() {
		$('.waves-light').removeClass('btn-small');
		$('.waves-light').addClass('btn-large');
    $('.material-icons').removeClass('small');
		$('.material-icons').addClass('medium');
});

$('.red-text').on('ajax:success', function(event){
  $('.material-icons').removeClass('small');
	$('.material-icons').addClass('medium');
});
</script>
<script>
var ctx = document.getElementById("beanChart").getContext('2d');
ctx.canvas.height = 600;
Chart.defaults.global.defaultFontSize = 20;

var beanChart = new Chart(ctx,{
	type: 'radar',
	data: {
		labels:[I18n.t('js.sour'),I18n.t('js.bitter'),I18n.t('js.sweet')],
		datasets: [{
			data: [<%= bean.impression.i_sour %>, <%= bean.impression.i_bitter %>, <%= bean.impression.i_sweet %>],
			backgroundColor: 'rgba(235,9,212,0.2)',
			borderColor: "Brown",
			pointStyle: "circle"
		}]
	},
	options: {
		responsive: true,
		maintainAspectRatio: false,
		tooltips: {
		mode: 'nearest'
        },
		legend: {
			display: false
				 },
		scale: {
			ticks: {
				suggestedMin: 0,
				uggestedMax: 5,
				stepSize: 1
			},
			pointLabels: {
            fontSize: 20
			},
			gridLines: {
				display: true,
			},
			angleLines: {
				display: true
			}
		}
	}
});
</script>
